%% Архитектура платформы AIoT (TOGAF Layers + Components)
flowchart TD
  %% Бизнес-слой
  A1[Бизнес-цели и сценарии] --> A2[Цифровая трансформация отраслей]
  A1 --> A3[Smart Habitat / Умная среда]
  A1 --> A4[Обучение и диагностика по видео/аудио]

  %% Прикладной слой
  B1[Модули: AICapture, AIVideoLab, MicroAI, BigData] --> B2[Рекомендательные и экспертные системы]
  B1 --> B3[IDE и среды моделирования]
  B2 --> B4[API внешних интеграций / Git / CI-CD]
  A2 --> B1
  A3 --> B2
  A4 --> B3

  %% Данные
  C1[Данные: видео, аудио, сенсоры, временные ряды] --> C2[Архив / Потоки / Цифровые двойники]
  C2 --> C3[Модель поведения / Сценарии пользователя]
  B1 --> C2
  B2 --> C3

  %% Технологии
  D1[Инфраструктура: Docker, GPU, OpenVINO] --> D2[K3S, Argo, Distroless]
  D2 --> D3[Edge + Fog + Cloud]
  D3 --> B1
  D3 --> B2
  D3 --> C1

  %% Компоненты платформы
  subgraph PlatformFW
    E1[Контейнерный оркестратор]
    E2[Планировщик задач (Argo)]
    E3[Инструменты ML-хостинга]
    E4[Фреймворк аппроксимационного моделирования]
    E5[Нейросетевой конфигуратор]
    E6[Модули видеоаналитики]
    E7[Разметка и потоковая генерация данных]
  end

  D2 --> E1
  B1 --> E6
  B3 --> E5
  C2 --> E7
  C3 --> E4
  B2 --> E3